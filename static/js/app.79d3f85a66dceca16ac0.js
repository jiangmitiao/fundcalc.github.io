webpackJsonp([1],{"1uuo":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),i=n("zL8q"),o=n.n(i),s=(n("tvR6"),{render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("el-menu",{attrs:{"default-active":t.$route.path,router:"",mode:"horizontal"}},[n("el-menu-item",{attrs:{index:"/"}},[t._v("首页")]),t._v(" "),n("el-menu-item",{attrs:{index:"/HuShen300"}},[t._v("沪深300")]),t._v(" "),n("el-menu-item",{attrs:{index:"/ShangZheng50"}},[t._v("上证50")])],1),t._v(" "),n("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.$route.meta.title,expression:"$route.meta.title"}]})],1)},staticRenderFns:[]});var r=n("VU/8")({name:"App"},s,!1,function(t){n("i8x0")},null,null).exports,u=n("/ocq"),l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))]),t._v(" "),n("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),n("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),n("br"),t._v(" "),n("li",[n("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};n("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},l,!1,function(t){n("1uuo")},"data-v-d8ec41bc",null).exports;var c=n("ifoU"),h=n.n(c),d=function(t,e,n){e<100||e>1e4?n(new Error("金额在100-10000之间")):n()},f={name:"SimpleFundComputer",props:{title:"",fundData:{default:[]}},watch:{title:"init",fundData:"init"},data:function(){return{pickerOptions:{shortcuts:[]},form:{selectedDate:[],cycleDays:7,singleMoney:100,forceCycle:!0},rules:{selectedDate:[{required:!0,message:"请选择日期",trigger:"blur"},{validator:this.checkDate,trigger:"blur"}],cycleDays:[{required:!0,message:"请输入定投周期",trigger:"blur"}],singleMoney:[{required:!0,message:"请输入每期金额",trigger:"blur"},{validator:d,trigger:"blur"}]},messages:"",result:null,buttonName:"去计算",fundDataMap:new h.a,polar:{title:{text:"折线图堆叠",show:!0},tooltip:{trigger:"axis"},toolbox:{feature:{saveAsImage:{}}},legend:{data:["指数","收益率"]},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:[{type:"value",scale:!0},{type:"value",scale:!0,axisLabel:{show:!0,interval:"auto",formatter:"{value} %"}}],series:[]}}},methods:{compute:function(t){this.form.selectedDate[0];var e=this.form.selectedDate[1],n=this.form.cycleDays,a=this.form.singleMoney,i=this.form.forceCycle,o=0,s=0,r=this.form.selectedDate[0],u=0,l=[],c=[],h=[],d="";do{o++;var f=this.findItem(r).date,p=this.findItem(f).close;s+=a/p,u=p,r=i?this.getDateStr(new Date(r),n):this.getDateStr(new Date(f),n),d+="投放时间:"+f+", 指数值:"+p+", 买入份数:"+(a/p).toFixed(2)+", 总持有份数"+s.toFixed(2)+"\n",l.push(f),c.push(u);var m=o*a,g=s*u;h.push((100*(g-m)/m).toFixed(2))}while(new Date(r).getTime()<=new Date(e).getTime());this.result={cycleCount:o,singleMoney:a.toFixed(2),inputMoney:(o*a).toFixed(2),outputMoney:(s*u).toFixed(2),lastClose:u,runDateList:l,calcLog:d},this.result.roi=(100*(this.result.outputMoney-this.result.inputMoney)/this.result.inputMoney).toFixed(2),this.polar.xAxis.data=l,this.polar.series=[{yAxisIndex:0,data:c,type:"line",smooth:!0,name:"指数"},{yAxisIndex:1,data:h,type:"line",smooth:!0,name:"收益率"}],t()},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.buttonName="计算中...",e.result=null,setTimeout(function(){e.compute(function(){return e.buttonName="去计算"})},10)})},checkDate:function(t,e,n){this.hasDate(e[0])?this.hasDate(e[1])?n():n(new Error("结束时间不是开市时间")):n(new Error("开始时间不是开市时间"))},hasDate:function(t){return!!this.fundDataMap.has(t)},findDate:function(t){var e=this.findItem(t);return null!=e?e.date:null},findItem:function(t){if(this.fundDataMap.has(t))return this.fundDataMap.get(t);var e=Number.MAX_VALUE,n=null;return this.fundData.forEach(function(a){var i=Math.abs(new Date(a.date)-new Date(t));i<=e&&(e=i,n=a)}),n},getLastDateStr:function(){var t=new Date(this.fundData[this.fundData.length-1].date);return this.getDateStr(t,0)},getDateStr:function(t,e){var n=new Date(new Date(t).getTime()+864e5*e);return n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()},getOldFundDate:function(t){if(0===this.fundData.length)return null;var e=864e5*t,n=new Date(this.fundData[this.fundData.length-1].date)-e;return this.findDate(n)},init:function(){if(0!==this.fundData.length){var t=this;t.fundDataMap=new h.a,this.fundData.forEach(function(e){t.fundDataMap.set(e.date,e)}),this.messages="数据截止"+this.getLastDateStr(),this.form.selectedDate=[this.getOldFundDate(1095),this.getOldFundDate(0)],this.pickerOptions.shortcuts=[{text:"最近12个月",onClick:function(e){e.$emit("pick",[t.getOldFundDate(365),t.getOldFundDate(0)])}},{text:"最近3年",onClick:function(e){e.$emit("pick",[t.getOldFundDate(1095),t.getOldFundDate(0)])}},{text:"最近5年",onClick:function(e){e.$emit("pick",[t.getOldFundDate(1825),t.getOldFundDate(0)])}},{text:"全部数据",onClick:function(e){var n=t.getOldFundDate(0),a=t.fundData[0].date;e.$emit("pick",[a,n])}}]}}},created:function(){this.init()}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",[n("el-col",{attrs:{span:24}},[n("h3",[t._v(t._s(t.title))]),t._v(" "),n("h3"),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v("数据来源自乐咕乐股网")]),t._v(" "),n("span",[t._v(t._s(t.messages))])])],1),t._v(" "),n("el-row",[n("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"定投时间",prop:"selectedDate"}},[n("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions},model:{value:t.form.selectedDate,callback:function(e){t.$set(t.form,"selectedDate",e)},expression:"form.selectedDate"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"定投间隔",prop:"cycleDays"}},[n("el-slider",{attrs:{max:30,min:1,"show-input":""},model:{value:t.form.cycleDays,callback:function(e){t.$set(t.form,"cycleDays",e)},expression:"form.cycleDays"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"每期金额",prop:"singleMoney"}},[n("el-input",{attrs:{placeholder:"请输入每期金额",type:"number",min:1},model:{value:t.form.singleMoney,callback:function(e){t.$set(t.form,"singleMoney",e)},expression:"form.singleMoney"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"周期强制"}},[n("el-switch",{model:{value:t.form.forceCycle,callback:function(e){t.$set(t.form,"forceCycle",e)},expression:"form.forceCycle"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},domProps:{textContent:t._s(t.buttonName)},on:{click:function(e){return t.submitForm("form")}}})],1)],1)],1),t._v(" "),null!=t.result?n("el-row",[n("el-col",{attrs:{span:24}},[n("p",[t._v("定投期数:"),n("span",{domProps:{textContent:t._s(t.result.cycleCount)}})]),t._v(" "),n("p",[t._v("每期金额:"),n("span",{domProps:{textContent:t._s(t.result.singleMoney)}})]),t._v(" "),n("p",[t._v("总投入:"),n("span",{domProps:{textContent:t._s(t.result.inputMoney)}})]),t._v(" "),n("p",[t._v("总回报:"),n("span",{domProps:{textContent:t._s(t.result.outputMoney)}})]),t._v(" "),n("p",[t._v("收益率:"),n("span",{domProps:{textContent:t._s(t.result.roi)}}),t._v("%")])]),t._v(" "),n("el-col",{attrs:{span:24}},[n("v-chart",{attrs:{options:t.polar}})],1)],1):t._e()],1)},staticRenderFns:[]};var m=n("VU/8")(f,p,!1,function(t){n("izTe")},null,null).exports,g=n("mtWM"),v=n.n(g),_={getHuShen300:function(t,e){v.a.get("../../static/hushen300.json").then(function(e){t(e.data)}).catch(function(t){console.error(t),e(t)})},getShangZheng50:function(t,e){v.a.get("../../static/shangzheng50.json").then(function(e){t(e.data)}).catch(function(t){console.error(t),e(t)})}},D=_,y={name:"HuShen300",components:{SimpleFundComputer:m},data:function(){return{fundData:[],loading:!1}},methods:{},mounted:function(){var t=this;t.loading=!0,D.getHuShen300(function(e){t.fundData=e,t.loading=!1},function(e){console.log(e),t.$alert("获取数据失败,请刷新页面","错误提示",{confirmButtonText:"确定"})})}},x={render:function(){var t=this.$createElement;return(this._self._c||t)("SimpleFundComputer",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],attrs:{"element-loading-text":"数据加载中",title:"沪深300指数基金模拟定投计算器",fundData:this.fundData}})},staticRenderFns:[]};var w=n("VU/8")(y,x,!1,function(t){n("SEZk")},"data-v-0d9c7c9e",null).exports,b={name:"ShangZheng50",components:{SimpleFundComputer:m},data:function(){return{fundData:[],loading:!1}},methods:{},mounted:function(){var t=this;t.loading=!0,D.getShangZheng50(function(e){t.fundData=e,t.loading=!1},function(e){console.log(e),t.$alert("获取数据失败,请刷新页面","错误提示",{confirmButtonText:"确定"})})}},M={render:function(){var t=this.$createElement;return(this._self._c||t)("SimpleFundComputer",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],attrs:{"element-loading-text":"数据加载中",title:"上证50指数基金模拟定投计算器",fundData:this.fundData}})},staticRenderFns:[]};var O=n("VU/8")(b,M,!1,function(t){n("ZGT/")},"data-v-423f3fd8",null).exports,k={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v("\n    1. 创建该网站的缘由?\n  ")]),t._v(" "),n("p",[t._v("\n    首先，网上不太容易找到全量的历史指数数据。\n    其次，如果想根据历史指数数据做一些投放模拟，也没有相关工具。\n    最后，网上能找到的定投计算器都是给定了收益率后，计算最终受益。\n    实际上我需要的是做这样的计算，假设我在三年前每个礼拜买入100元，如今的收益率如何。\n  ")]),t._v(" "),n("h3",[t._v("\n    2. 如何使用?\n  ")]),t._v(" "),n("p",[t._v("\n    在导航栏选择想要模拟计算定投的指数，进入相应页面后，输入你的定投日期、定投间隔、每期金额和"),n("b",[t._v("周期强制")]),t._v("，点击去计算后就可以看到相关数据了。\n    "),n("b",[t._v("周期强制")]),t._v("指的是，如果理论投放的那一天如果是节假日。\n    那么实际投放的日期应该在节后或节前，下一次的理论投放日期是：方案1、本次理论投放+周期间隔 方案2、本次实际投放+周期间隔。\n    选中代表第一个方案，取消勾选代表第二个方案。\n  ")]),t._v(" "),n("h3",[t._v("\n    3. 数据准确吗?更新及时吗？\n  ")]),t._v(" "),n("p",[t._v("\n    数据目前源自乐咕乐股网，每隔一段时间会更新一次。目前只有沪深300和上证50的数据，后期会补充上其他指数。\n  ")]),t._v(" "),n("h3",[t._v("\n    4. 如何联系我？\n  ")]),t._v(" "),n("p",[t._v("\n    欢迎Star"),n("a",{attrs:{href:"https://github.com/jiangmitiao/TermInvestmentFundCalculation",target:"_blank"}},[t._v("GitHub")])])])}]};var F=n("VU/8")({name:"Index",mounted:function(){}},k,!1,function(t){n("QZYe")},"data-v-5399c04e",null).exports;a.default.use(u.a);var C=new u.a({routes:[{path:"/",name:"Index",component:F,meta:{title:"指数基金模拟定投计算器"}},{path:"/HuShen300",name:"HuShen300",component:w,meta:{title:"沪深300 --指数基金模拟定投计算器"}},{path:"/ShangZheng50",name:"ShangZheng50",component:O,meta:{title:"上证50 --指数基金模拟定投计算器"}}]}),$=n("HSQo"),S=n.n($),E=n("Gu7T"),z=n.n(E),j=n("Icdr"),A=n.n(j),T=n("O4Lo"),U=n.n(T),L=n("472O"),H=["legendselectchanged","legendselected","legendunselected","legendscroll","datazoom","datarangeselected","timelinechanged","timelineplaychanged","restore","dataviewchanged","magictypechanged","geoselectchanged","geoselected","geounselected","pieselectchanged","pieselected","pieunselected","mapselectchanged","mapselected","mapunselected","axisareaselected","focusnodeadjacency","unfocusnodeadjacency","brush","brushselected","rendered","finished","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],I=["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],P=["theme","initOptions","autoresize"],R=["manualUpdate","watchShallow"],Z={props:{options:Object,theme:[String,Object],initOptions:Object,group:String,autoresize:Boolean,watchShallow:Boolean,manualUpdate:Boolean},data:function(){return{lastArea:0}},watch:{group:function(t){this.chart.group=t}},methods:{mergeOptions:function(t,e,n){this.manualUpdate&&(this.manualOptions=t),this.chart?this.delegateMethod("setOption",t,e,n):this.init(t)},appendData:function(t){this.delegateMethod("appendData",t)},resize:function(t){this.delegateMethod("resize",t)},dispatchAction:function(t){this.delegateMethod("dispatchAction",t)},convertToPixel:function(t,e){return this.delegateMethod("convertToPixel",t,e)},convertFromPixel:function(t,e){return this.delegateMethod("convertFromPixel",t,e)},containPixel:function(t,e){return this.delegateMethod("containPixel",t,e)},showLoading:function(t,e){this.delegateMethod("showLoading",t,e)},hideLoading:function(){this.delegateMethod("hideLoading")},getDataURL:function(t){return this.delegateMethod("getDataURL",t)},getConnectedDataURL:function(t){return this.delegateMethod("getConnectedDataURL",t)},clear:function(){this.delegateMethod("clear")},dispose:function(){this.delegateMethod("dispose")},delegateMethod:function(t){var e;this.chart||this.init();for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return(e=this.chart)[t].apply(e,z()(a))},delegateGet:function(t){return this.chart||this.init(),this.chart[t]()},getArea:function(){return this.$el.offsetWidth*this.$el.offsetHeight},init:function(t){var e=this;if(!this.chart){var n=A.a.init(this.$el,this.theme,this.initOptions);this.group&&(n.group=this.group),n.setOption(t||this.manualOptions||this.options||{},!0),H.forEach(function(t){n.on(t,function(n){e.$emit(t,n)})}),I.forEach(function(t){n.getZr().on(t,function(n){e.$emit("zr:"+t,n)})}),this.autoresize&&(this.lastArea=this.getArea(),this.__resizeHandler=U()(function(){0===e.lastArea?(e.mergeOptions({},!0),e.resize(),e.mergeOptions(e.options||e.manualOptions||{},!0)):e.resize(),e.lastArea=e.getArea()},100,{leading:!0}),Object(L.a)(this.$el,this.__resizeHandler)),S()(this,{width:{configurable:!0,get:function(){return e.delegateGet("getWidth")}},height:{configurable:!0,get:function(){return e.delegateGet("getHeight")}},isDisposed:{configurable:!0,get:function(){return!!e.delegateGet("isDisposed")}},computedOptions:{configurable:!0,get:function(){return e.delegateGet("getOption")}}}),this.chart=n}},initOptionsWatcher:function(){var t=this;this.__unwatchOptions&&(this.__unwatchOptions(),this.__unwatchOptions=null),this.manualUpdate||(this.__unwatchOptions=this.$watch("options",function(e,n){!t.chart&&e?t.init():t.chart.setOption(e,e!==n)},{deep:!this.watchShallow}))},destroy:function(){this.autoresize&&Object(L.b)(this.$el,this.__resizeHandler),this.dispose(),this.chart=null},refresh:function(){this.chart&&(this.destroy(),this.init())}},created:function(){var t=this;this.initOptionsWatcher(),P.forEach(function(e){t.$watch(e,function(){t.refresh()},{deep:!0})}),R.forEach(function(e){t.$watch(e,function(){t.initOptionsWatcher(),t.refresh()})})},mounted:function(){this.options&&this.init()},activated:function(){this.autoresize&&this.chart&&this.chart.resize()},destroyed:function(){this.chart&&this.destroy()},connect:function(t){"string"!=typeof t&&(t=t.map(function(t){return t.chart})),A.a.connect(t)},disconnect:function(t){A.a.disConnect(t)},registerMap:function(t,e,n){A.a.registerMap(t,e,n)},registerTheme:function(t,e){A.a.registerTheme(t,e)},graphic:A.a.graphic},N={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"echarts"})},staticRenderFns:[]};var G=n("VU/8")(Z,N,!1,function(t){n("Q0gF")},null,null).exports,V=(n("Oq2I"),n("4UDB"),n("YqKu")),W=n.n(V);a.default.component("v-chart",G),a.default.use(W.a),a.default.use(o.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:C,components:{App:r},template:"<App/>"});var q="https:"==document.location.protocol?"https://":"http://";document.write(unescape("%3Cspan id='cnzz_stat_icon_1278592518'%3E%3C/span%3E%3Cscript src='"+q+"v1.cnzz.com/z_stat.php%3Fid%3D1278592518%26show%3Dpic' type='text/javascript'%3E%3C/script%3E")),document.getElementById("cnzz_stat_icon_1278592518").hidden=!0},Q0gF:function(t,e){},QZYe:function(t,e){},SEZk:function(t,e){},"ZGT/":function(t,e){},i8x0:function(t,e){},izTe:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.79d3f85a66dceca16ac0.js.map